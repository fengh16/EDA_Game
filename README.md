# EDA_Game
A EDA game
整体思路：
一个数（score）来记录下来当前的得分，六个数码管分别赋值，扫描显示。用六个七位二进制来分别保存这六个数码管中应该显示的东西，同时通过计数的方法分频显示，计数如果到达一个阈值（500*（拨码开关前两位代表的数 + 1），单位为ms）之后就进行刷新操作，因此拨码开关前两位可以控制速度。
在刷新的时候，首先判断是否已经开始游戏（使用一个started变量来保存是否开始游戏），如果开始游戏的话，每次刷新将后面一个数码管的内容放到前一个数码管之中，表示下落效果，最后的数码管中填入新的值。
按键的作用：有一个开关按钮（Key0，就是游戏过程中看到的最右侧一个按钮）控制游戏开关，剩下三个按钮用来消除。
当用于消除的按钮按下之后，判断其对应的Last变量是否与它不同，如果是则表示这是新按下的操作，进行处理，否则不处理。每1ms刷新都重写Last变量的值为当前的按钮状态。如果是新按下的操作，则判断第一个和第二个数码管对应位置是否有障碍，如果有的话消除一个，如果没有则游戏结束。

因为不知道硬件描述语言里面是否有生成随机数的内容，所以采用伪随机：用Python程序生成一系列随机的0和1，放在data数组之中，然后根据设置的关卡数（拨码开关后6位）来判断从这个数组中哪一部分开始读取，Python程序如下所示：

import random
x = ""
for j in range(8):
    for i in range(2048):
        if random.random() > 0.9 - 0.05 * j:
            x = x + str(1)
        else:
            x = x + "0"
print(x)

因为硬件描述语言里面不能使用变量作为方括号里面的值，所以只能采用case语句来做（即代码中的295行到12584行，是一整个case语句。原本打算让case语句有16384种选择，但尝试之后发现编译卡死，所以缩小了规模，成为16384/8种）。使用Python生成这部分代码，具体如下：

a = open('test.txt', 'w')
a.write('case(num)\n')
for i in range(int(16384/8)):
    a.write("\t" + str(i) + ":\n\t\tbegin\n\t\tleft <= data1[" + str(i) + ':' + str(i) + '];\n')
    a.write("\t\t\tmiddle <= data2[" + str(i) + ':' + str(i) + '];\n')
    a.write("\t\t\tright <= data3[" + str(i) + ':' + str(i) + '];\n\t\tend\n')
a.write('endcase')
